(this["webpackJsonpsakura-stamp"]=this["webpackJsonpsakura-stamp"]||[]).push([[0],{52:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(10),r=a.n(s),o=a(20),c=a(26),d=a(33),l=a.n(d),u={name:"",messages:[],score:0,changing:!0},m=Object(c.b)({name:"talk",initialState:u,reducers:{initGame:function(e){e.name=u.name,e.messages=u.messages,e.changing=!1},initScenario:function(e,t){e.name=t.payload,e.messages=u.messages,e.changing=!1},appendMessage:function(e,t){t.payload.id=e.messages.length,t.payload.time=l()().format("H:mm"),e.messages.push(t.payload)},addScore:function(e){e.score+=1},setChangingTrue:function(e){e.changing=!0}}}),f=m.actions,j=(f.initGame,f.initScenario),x=f.appendMessage,p=f.addScore,b=f.setChangingTrue,h=Object(c.a)({reducer:{talk:m.reducer}}),g=o.c,O=(a(52),a(81)),k=a(55),v=a(71),y=a(83),w=a(73),R=a(74),N=a(82),I=a(76),S=a(75),C=a(77),T=a(78),W=a(2),G=Object(v.a)((function(e){return Object(y.a)({bar:{backgroundColor:"#234"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,fontWeight:700}})})),K=function(){var e=G(),t=g((function(e){return e.talk.name}));return Object(W.jsx)(w.a,{position:"static",className:e.bar,children:Object(W.jsxs)(R.a,{variant:"dense",children:[Object(W.jsx)(N.a,{edge:"start",className:e.menuButton,color:"inherit",children:Object(W.jsx)(S.a,{})}),Object(W.jsx)(I.a,{variant:"body1",className:e.title,children:t}),Object(W.jsx)(N.a,{color:"inherit",children:Object(W.jsx)(C.a,{})}),Object(W.jsx)(N.a,{color:"inherit",children:Object(W.jsx)(T.a,{})})]})})},E=a(79),z=a(38),B=a.n(z),D=a(84),M=Object(v.a)((function(){return Object(y.a)({timeWrapper:{margin:"0 4px",width:40},time:{color:"#345",marginTop:-4},leftRoot:{display:"flex",padding:4},avatar:{width:32,height:32},triangle:{width:0,height:0,margin:"4px 0 0 -6px",border:"6px solid transparent",borderRight:"18px solid #edf1ee","-webkit-transform":"rotate(35deg)",transform:"rotate(35deg)"},text:{backgroundColor:"#edf1ee",borderRadius:14,padding:"4px 12px",margin:"6px 0 0 -10px"}})})),F=function(e){var t=e.message,a=M();return Object(W.jsxs)(E.a,{item:!0,container:!0,direction:"column",justify:"flex-end",alignItems:"left"===t.side?"flex-start":"flex-end",className:a.timeWrapper,children:["right"===t.side&&Object(W.jsx)(I.a,{variant:"caption",className:a.time,children:"\u65e2\u8aad"}),Object(W.jsx)(I.a,{variant:"caption",className:a.time,children:t.time})]})},H=function(e){var t=e.message,a=M();return"left"===t.side?Object(W.jsxs)("div",{className:a.leftRoot,children:[Object(W.jsx)(D.a,{alt:t.name,src:"members/".concat(t.name,".jpg"),className:a.avatar}),Object(W.jsx)("div",{className:a.triangle}),Object(W.jsx)(I.a,{variant:"body2",className:a.text,children:t.text}),Object(W.jsx)(F,{message:t})]}):Object(W.jsxs)(E.a,{item:!0,container:!0,direction:"row",justify:"flex-end",alignItems:"flex-end",spacing:1,xs:12,children:[Object(W.jsx)(F,{message:t}),Object(W.jsx)(E.a,{item:!0,xs:5,children:Object(W.jsx)("img",{width:"100%",src:"stamps/".concat(t.text,".png"),alt:t.text})})]})},J=Object(v.a)((function(){return Object(y.a)({root:{flexGrow:1,overflow:"scroll",backgroundImage:"url(line_background.jpg)",backgroundSize:"cover"},today:{backgroundColor:"#516787",color:"white",borderRadius:16,margin:"8px 0",padding:"4px 12px"}})}));B.a.polyfill();var _=function(){var e=J(),t=g((function(e){return e.talk.messages})),a=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=a.current;e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}),[t]),Object(W.jsxs)("div",{className:e.root,ref:a,children:[Object(W.jsx)(E.a,{container:!0,justify:"center",children:Object(W.jsx)(I.a,{className:e.today,variant:"caption",children:"\u4eca\u65e5"})}),t.map((function(e){return Object(W.jsx)(H,{message:e},e.id)}))]})},q=a(80),A=["tehe","nasuo","dame","shirangana","sonnakoto","gungun","otome","mukako","9","10","11","12"],L=[{name:"\u516b\u6728\u7f8e\u6a39",units:{start:{states:[{side:"left",name:"miki",text:"\u4eca\u65e5\u306e\u663c"},{side:"left",name:"miki",text:"\u3072\u3058\u304d\u3092\u98df\u3079\u305f"},{side:"left",name:"miki",text:"\u516b\u6728\u7f8e\u6a39\u3067\u3059"},{side:"input",root:{shirangana:"success"},defaultRoot:"retry"}],interrupted:"interrupted"},interrupted:{states:[{side:"left",name:"miki",text:"\u6700\u5f8c\u307e\u3067\u8a00\u308f\u305b\u3066\u304f\u3060\u3055\u3044\u7b11"},{side:"left",name:"miki",text:"\u4eca\u65e5\u306e\u663c"},{side:"left",name:"miki",text:"\u3072\u3058\u304d\u3092\u98df\u3079\u305f"},{side:"left",name:"miki",text:"\u516b\u6728\u7f8e\u6a39\u3067\u3059"},{side:"input",root:{shirangana:"success"},defaultRoot:"retry"}],interrupted:"failure"},retry:{states:[{side:"left",name:"miki",text:"......\u3082\u3046\uff11\u56de\u3044\u304d\u307e\u3059\u306d\u30fc\u3001"},{side:"left",name:"miki",text:"\u305f\u3053\u713c\u304d\u306f"},{side:"left",name:"miki",text:"\u30bd\u30fc\u30b9\u5c11\u306a\u76ee"},{side:"left",name:"miki",text:"\u516b\u6728\u7f8e\u6a39\u3067\u3059"},{side:"input",root:{shirangana:"success"},defaultRoot:"failure"}],interrupted:"failure"},success:{states:[{side:"left",name:"miki",text:"\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01"},{side:"left",name:"miki",text:"\u4e2d\u7b49\u90e8\uff12\u5e74\u3001\u526f\u4f1a\u9577\u306e\u516b\u6728\u7f8e\u6a39\u3067\u3059\uff01"},{side:"end"}]},failure:{states:[{side:"end"}]}}},{name:"\u68ee\u30cf\u30e4\u30b7",units:{start:{states:[{side:"left",name:"hayashi",text:"\u51fa\u5e2d\u3092\u53d6\u308a\u307e\u3059"},{side:"left",name:"hayashi",text:"\u4e2d\u7b49\u90e8\uff13\u5e74\u3001\u767d\u9ce5\u6c99\u5357\uff01"},{side:"input",root:{tehe:"kokona"},defaultRoot:"failure"}]},kokona:{states:[{side:"left",name:"hayashi",text:"\u91ce\u4e2d\u3053\u3053\u306a\uff01"},{side:"input",root:{nasuo:"neo"},defaultRoot:"failure"}]},neo:{states:[{side:"left",name:"hayashi",text:"\u4e2d\u7b49\u90e8\uff12\u5e74\u3001\u4f50\u85e4\u611b\u685c\uff01"},{side:"input",root:{sonnakoto:"miku"},defaultRoot:"failure"}]},miku:{states:[{side:"left",name:"hayashi",text:"\u7530\u4e2d\u7f8e\u7a7a\uff01"},{side:"input",root:{dame:"miko"},defaultRoot:"failure"}]},miko:{states:[{side:"left",name:"hayashi",text:"\u6238\u9ad8\u7f8e\u6e56\uff01"},{side:"input",root:{gungun:"miki"},defaultRoot:"failure"}]},miki:{states:[{side:"left",name:"hayashi",text:"\u516b\u6728\u7f8e\u6a39\uff01"},{side:"input",root:{shirangana:"yume"},defaultRoot:"failure"}]},yume:{states:[{side:"left",name:"hayashi",text:"\u4e2d\u7b49\u90e8\uff11\u5e74\u3001\u91ce\u5d0e\u7d50\u611b\uff01"},{side:"input",root:{otome:"sakia"},defaultRoot:"failure"}]},sakia:{states:[{side:"left",name:"hayashi",text:"\u5c0f\u7b49\u90e8\uff16\u5e74\u3001\u6728\u6751\u54b2\u611b\uff01"},{side:"input",root:{mukako:"success"},defaultRoot:"failure"}]},success:{states:[{side:"end"}]},failure:{states:[{side:"end"}]}}},{name:"\u7d50\u679c\u767a\u8868",units:{start:{states:[{side:"left",name:"sana",text:"\u7d50\u679c\u767a\u8868\uff01"},{side:"left",name:"sana",text:"\u3042\u306a\u305f\u306f......"},{side:"left",name:"sana",text:"\u300c\u30ac\u30c1\u7236\u5144\u300d\u3067\u3059\uff01"},{side:"left",name:"sana",text:"\u3082\u3046\u4e00\u5ea6\u3042\u305d\u3076"},{side:"left",name:"sana",text:"Twitter\u3067\u5171\u6709\u3059\u308b"},{side:"input",root:{},defaultRoot:""}]}}}],P=a(21),Q=a(39),U={scenarioIndex:0,unitKey:"start",stateIndex:0},V=function(){var e=Object(o.b)(),t=Object(n.useState)(U),a=Object(Q.a)(t,2),i=a[0],s=a[1],r=L[i.scenarioIndex],c=r.units[i.unitKey],d=Object(n.useRef)();Object(n.useEffect)((function(){e(j(L[0].name))}),[e]),Object(n.useEffect)((function(){var t=c.states[i.stateIndex];if("input"!==t.side){if("end"===t.side){if(i.scenarioIndex+1===L.length)return;return e(b()),void(d.current=setTimeout((function(){e(j(L[i.scenarioIndex+1].name)),s((function(e){return{scenarioIndex:e.scenarioIndex+1,unitKey:U.unitKey,stateIndex:0}}))}),5e3))}d.current=setTimeout((function(){e(x(t)),s((function(e){return Object(P.a)(Object(P.a)({},e),{},{stateIndex:e.stateIndex+1})}))}),1900)}}),[e,i,c,r]);var l=function(t){"success"===t&&e(p()),s((function(e){return Object(P.a)(Object(P.a)({},e),{},{unitKey:t,stateIndex:0})}))};return function(t){e(x({side:"right",name:"",isStamp:!0,text:t}));var a=c.states[i.stateIndex];if("input"===a.side){var n,s=null!==(n=a.root[t])&&void 0!==n?n:a.defaultRoot;s&&l(s)}else if(i.stateIndex>0&&d.current){var r=c.interrupted;if(!r)return;clearTimeout(d.current),l(r)}}},X=Object(v.a)((function(){return Object(y.a)({root:{backgroundColor:"#edf1ee"},title:{backgroundColor:"#234",color:"white",padding:4},gridWrapper:{padding:"0 16px"},stampGrid:{padding:8},imgWrapper:{width:"100%",position:"relative",overflow:"hidden",paddingTop:"100%"},img:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"},button:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"transparent",color:"transparent",cursor:"pointer",padding:0,borderStyle:"none"}})})),Y=function(){var e=X(),t=V();return Object(W.jsxs)("div",{className:e.root,children:[Object(W.jsxs)(E.a,{container:!0,justify:"center",alignItems:"center",className:e.title,children:[Object(W.jsx)(I.a,{variant:"body1",children:"\u30b9\u30bf\u30f3\u30d7"}),Object(W.jsx)(q.a,{})]}),Object(W.jsx)("div",{className:e.gridWrapper,children:Object(W.jsx)(E.a,{container:!0,direction:"row",justify:"center",children:A.map((function(a){return Object(W.jsx)(E.a,{item:!0,xs:3,children:Object(W.jsx)("div",{className:e.stampGrid,children:Object(W.jsxs)("div",{className:e.imgWrapper,children:[Object(W.jsx)("img",{src:"stamps/".concat(a,".png"),alt:a,className:e.img}),Object(W.jsx)("button",{type:"button",className:e.button,onClick:function(){return t(a)},children:" "})]})})},a)}))})})]})},Z=a(85),$=Object(v.a)((function(){return Object(y.a)({cover:{backgroundColor:"white",position:"absolute",width:"100vw",height:"100vh",top:0,zIndex:9999}})})),ee={entering:{transition:"all ".concat(2900,"ms ease"),transitionDelay:"".concat(2e3,"ms"),opacity:0},entered:{transition:"all ".concat(2900,"ms ease"),transitionDelay:"".concat(2e3,"ms"),opacity:1},exiting:{transition:"all ".concat(800,"ms ease"),opacity:1},exited:{transition:"all ".concat(800,"ms ease"),opacity:0,zIndex:-100}},te=function(){var e=$(),t=g((function(e){return e.talk.changing})),a=Object(n.useRef)(null);return Object(W.jsx)(Z.a,{in:t,timeout:0,nodeRef:a,children:function(t){return Object(W.jsx)("div",{className:e.cover,style:ee[t],ref:a})}})},ae=Object(v.a)((function(){return Object(y.a)({container:{flexGrow:1,padding:0,userSelect:"none"},paper:{height:"100vh","@supports (-webkit-touch-callout: none)":{height:"-webkit-fill-available"},display:"flex",flexDirection:"column"}})})),ne=function(){var e=ae();return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(O.a,{maxWidth:"xs",className:e.container,children:Object(W.jsxs)(k.a,{className:e.paper,elevation:2,children:[Object(W.jsx)(K,{}),Object(W.jsx)(_,{}),Object(W.jsx)(Y,{})]})}),Object(W.jsx)(te,{})]})};r.a.render(Object(W.jsx)(i.a.StrictMode,{children:Object(W.jsx)(o.a,{store:h,children:Object(W.jsx)(ne,{})})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.4329297b.chunk.js.map